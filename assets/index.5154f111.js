import{J as t}from"./vendor.4b080bc7.js";var e;!function(i){async function a(t,e){const[i,...a]=await n(t,e),s=i.split(",").map((t=>t.trim()));return a.map((t=>Object.fromEntries(t.split(",").map(((t,e)=>[s[e],t.trim()])))))}async function s(t,e,i=":"){const a=await n(t,e);return Object.fromEntries(a.filter((t=>t.includes(i))).map((t=>{const[e,...a]=t.split(i);return[e,a.join(i).trim()]})))}async function n(t,e){const i=t.files[e];if(!i)throw new Error(`Cannot find "${e}"`);return(await i.async("text")).trimEnd().split("\n")}(e||(e={})).fromZip=async function(e){const i=await e.arrayBuffer(),n=await t.loadAsync(i);console.log(Object.keys(n.files));const r=await a(n,"client/metrics/ticking.csv"),c=await s(n,"client/options.txt"),o=await a(n,"server/metrics/ticking.csv"),l=await s(n,"server/gamerules.txt","="),p=await s(n,"server/stats.txt"),m=await s(n,"system.txt"),u=Object.keys(n.files).filter((t=>t.match(/^server\/levels\/[a-z0-9_-]+\/[a-z0-9_-]+\/$/))),d=await Promise.all(u.map((t=>async function(t,e){const i=await a(t,`${e}block_entities.csv`),n=await a(t,`${e}chunks.csv`),r=await a(t,`${e}entities.csv`),c=await a(t,`${e}entity_chunks.csv`),o=await s(t,`${e}stats.txt`),l=o.entities.split(",").map((t=>parseInt(t)));return{blockEntities:i.map((t=>({x:parseFloat(t.x),y:parseFloat(t.y),z:parseFloat(t.z),type:t.type}))),chunks:n.map((t=>({x:parseInt(t.x),z:parseInt(t.z),level:parseInt(t.level),inMemory:"true"===t.in_memory,status:t.status,fullStatus:t.full_status,accessibleReady:t.accessible_ready,tickingReady:t.ticking_ready,entityTickingReady:t.entity_ticking_ready,spawning:"true"===t.spawning,blockEntityCount:parseInt(t.block_entity_count)}))),entities:r.map((t=>({x:parseFloat(t.x),y:parseFloat(t.y),z:parseFloat(t.z),uuid:t.uuid,type:t.type,alive:"true"===t.alive,displayName:t.display_name,customName:"[null]"===t.custom_name?null:t.custom_name}))),entityChunks:c.map((t=>({x:parseFloat(t.x),y:parseFloat(t.y),z:parseFloat(t.z),visibility:t.visibility,loadStatus:t.load_status,entityCount:parseInt(t.entity_count)}))),stats:{spawningChunks:parseInt(o.spawning_chunks),entities:{knownUuids:l[0],visibleEntityStorage:l[1],sectionStorage:l[2],chunkLoadStatuses:l[3],chunkVisibility:l[4],loadingInbox:l[5],chunksToUnload:l[6]},blockEntityTickers:parseInt(o.block_entity_tickers),blockTicks:parseInt(o.block_ticks),fluidTicks:parseInt(o.fluid_ticks),pendingTasks:parseInt(o.pending_tasks)}}}(n,t))));return{client:{metrics:{ticking:r.map((t=>({tick:parseInt(t["@tick"]),tickTime:Number(t.ticktime)})))},options:c},server:{levels:Object.fromEntries(u.map(((t,e)=>[t.replace(/^server\/levels\/([a-z0-9_-]+)\/([a-z0-9_-]+)\/$/,"$1:$2"),d[e]]))),metrics:{ticking:o.map((t=>({tick:parseInt(t["@tick"]),tickTime:Number(t.ticktime)})))},gamerules:l,stats:{pendingTasks:parseInt(p.pending_tasks),averageTickTime:parseFloat(p.average_tick_time),tickTimes:JSON.parse(p.tick_times)}},system:{versionName:m["Minecraft Version"],versionId:m["Minecraft Version ID"],isModded:!m["Is Modded"].startsWith("Probably not."),operatingSystem:m["Operating System"],windowSize:m["Window size"],resourcePacks:m["Resource Packs"].split(",").map((t=>t.trim())),dataPacks:m["Data Packs"].split(",").map((t=>t.trim()))}}}}();document.addEventListener("DOMContentLoaded",(()=>{document.body.addEventListener("drop",(async t=>{if(t.preventDefault(),t.dataTransfer)for(let i=0;i<t.dataTransfer.items.length;i++){const a=t.dataTransfer.items[i];if("file"===a.kind&&a.type.match(/^application\/(x-)?zip(-compressed)?$/)){const t=await e.fromZip(a.getAsFile());console.log(t),document.body.innerHTML=JSON.stringify(t,null,2)}}}),!1),document.body.addEventListener("dragover",(t=>{t.preventDefault()}),!1)}));
